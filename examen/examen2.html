<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="examen.css">
</head>
<body>

    <div id="div" name="mairo">

        <label for="nombre" id="introducir">Nombre</label> <input id="in1" type="text" name="in1"readonly>

        <label for="nombre" id="vastidor">Numero vastidor</label><input id="in2" type="number" name="in2">

        <p>
            <button id="button1"  id="b1" onclick="llamada ()">Entradas</button>
          </p>
    </div>


    <div id="entradas" name="entradas" >

        <label for="nombre">Numero bastidor</label> <input id="in3" type="text" name="in3"readonly>

        <label for="motor">Motor</label><input id="in4" type="text" name="in4" onblur="resmotor()">
        <label for="modelo">modelo</label><input id="in5" type="text" name="in5" onblur="resmodelo()">
        <label for="tipo">Tipo de reparacion</label><input id="in6" type="text" name="in6" onblur="resrepara()">
        <label for="estancia">Estancia en el taller</label><input id="in7" type="text" name="in7" onblur="resestancia()">

        <p>
            <button id="button2"  id="b2" onclick="resalta()">Entradas</button>
          </p>
    </div>





    
</body>


<script>

in1.value=localStorage.getItem("in1");


var vas;
var mot;
var mod;
var rep;
var est;


var vastidor=[];
var motor=[];
var modelo=[];
var tiporeparacion=[];
var estancia=[];
var w=0;
var y=0;
var filter6=/^([0-9])*$/;
var filter7=/^([a-zA-Z])*$/;
var ver=new boolean(true);
var vermotor=new boolean(true);
var vermodelo=new boolean(true);
var vertiporeparacion=new boolean(true);
var verestancia=new boolean(true);








function llamada (){

vas=document.getElementById("in2").value;


do{// esta parte controla introducir el nombre y el apellido
for(var x=0;x<1;x++){
                       
                       ver=filter6.test(vas);
                        
                        if(ver==true&&vas.length==12){
                                                    
                          w++;
                          alert("numero correcto");

                          
                                
                        }
                        else{
                                alert("Debes introducir un numero de vastidor vÃ¡lido");
                                w=0;
                                document.getElementById("in2").value="";
                                document.getElementById("in2").focus();
                                
                        }
 }


}while(w==0);


if(y==0&&w>0){

alert("Nuevo usuario, bienvenido");//para  el primer usuario registrado
y++;
vastidor.push(vas);
document.getElementById("entradas").style.visibility = "visible"; 
in3.value=in2.value;

}else{//para ver si el usuario esta dentro del array, si esta repetido lo elimina

if (w>1) {
vastidor.push(vas);

for (var i = 1; i<vastidor.length; i++) {
    if (vas==vastidor[i-1].trim()) {alert("Coche ya esta registrado en la bbdd, modificar campos"); 

       i=vastidor.length;
       vastidor.splice(i-1);
       
       
} else {if(i==vastidor.length-1){

alert("Entrada nueva");
in3.value=in2.value;
document.getElementById("entradas").style.visibility = "visible"; 
}
}
}
}
}

w=0;
}

function resmotor(){
    mot=document.getElementById("in4").value;
    mot=mot.toLowerCase();
    vermotor=filter7.test(mot);
    alert(mot);
                        
                        if((vermotor==true)&&((mot=="diesel")||(mot=="gasolina"))){
                                          
                            alert("correcto");
                          
                               
                        }
                        else{
                                alert("Debes introducir si es diesel o gasolina");
                                document.getElementById("in4").value="";
                                document.getElementById("in4").focus();
                                
                        }
                    }

                    function resmodelo(){
    mod=document.getElementById("in5").value;
    mod=mod.toLowerCase();
    vermodelo=filter7.test(mod);
    alert(mod);
                        
                        if(vermodelo==true){
                                          
                            alert("correcto");
                          
                               
                        }
                        else{
                                alert("Debes introducir un modelo de motor correcto");
                                document.getElementById("in5").value="";
                                document.getElementById("in5").focus();
                                
                        }
                    }


                    function resrepara(){
                        rep=document.getElementById("in6").value;
                        rep=rep.toLowerCase();
    vertiporeparacion=filter7.test(rep);
    alert(rep);
                        
                        if((vertiporeparacion==true)&&((rep=="chapa")||(rep=="pintura"))){
                                          
                            alert("correcto");
                          
                               
                        }
                        else{
                                alert("Debes introducir si es una reparacion de chapa o pintura");
                                document.getElementById("in6").value="";
                                document.getElementById("in6").focus();
                                
                        }
                    }


                    function resestancia(){
                        est=document.getElementById("in7").value;
                        est=est.toLowerCase();
    verestancia=filter7.test(est);
    alert(est);
                        
                        if((verestancia==true)&&((est=="si")||(est=="no"))){
                                          
                            alert("correcto");
                          
                               
                        }
                        else{
                                alert("Debes introducir si el coche esta en taller");
                                document.getElementById("in7").value="";
                                document.getElementById("in7").focus();
                                
                        }
                    }


function resalta(){

    alert("alta realizada correctamente");
    motor.push(mot);
    modelo.push(mod);
    tiporeparacion.push(rep);
    estancia.push(rep);
}















</script>
</html>